#ContentProvider

##概述
ContentProvider是Android应用对外开放的数据接口，只要符合它所定义的Uri格式的请求，均可以正常访问执行操作。其他的Android应用可以使用ContentResolver对象通过与ContentProvider同名的方法请求执行，被执行的就是ContentProvider中的同名的方法。所以ContentProvider很多对外可以访问的方法，在ContentResolver中均有同名的方法，是一一对应的，如图：

![](https://github.com/zt1991616/blog/raw/master/Image/14062501.png)

##Uri
在Android中，Uri是一种比较常见的资源访问方式，而对ContentProvider而言，Uri也是有固定格式的：
<srandard_prefix>://<authority>/<data_path>/<id>
- <srandard_prefix>：ContentProvider的srandard_prefix始终是content://
- <authority>：ContentProvider的名称
- <data_path>：请求的数据类型
- <id>：指定请求的特定数据

##ContentProvider
　ContentProvider也是Android应用的四大组件之一，所以也需要在AndroidManifest.xml文件中进行配置。而且某个应用程序通过ContentProvider暴露了自己的数据操作接口，那么不管该应用程序是否启动，其他应用程序都可以通过这个接口来操作它的内部数据。
　Android附带了许多有用的ContentProvider，但是本篇博客不会涉及到这些内容的，以后有时间会再讲解。Android附带的ContentProvider包括：
- Browser：存储如浏览器的信息。
- CallLog：存储通话记录等信息。
- Contacts：存储联系人等信息。
- MediaStore：存储媒体文件的信息。
- Settings：存储设备的设置和首选项信息。
在Android中，如果要创建自己的内容提供者的时候，需要扩展抽象类ContentProvider，并重写其中定义的各种方法。然后在AndroidManifest.xml文件中注册该ContentProvider即可。

ContentProvider是内容提供者，实现Android应用之间的数据交互，对于数据操作，无非也就是CRUD而已。下面是ContentProvider必须要实现的几个方法：
- onCreate()：初始化提供者。
- query(Uri, String[], String, String[], String)：查询数据，返回一个数据Cursor对象。
- insert(Uri, ContentValues)：插入一条数据。
- update(Uri, ContentValues, String, String[])：根据条件更新数据。
- delete(Uri, String, String[])：根据条件删除数据。
- getType(Uri) 返回MIME类型对应内容的URI。

除了onCreate()和getType()方法外，其他的均为CRUD操作，这些方法中，Uri参数为与ContentProvider匹配的请求Uri，剩下的参数可以参见SQLite的CRUD操作，基本一致。
还有两个方法：call()和bulkInsert()方法，使用call，理论上可以在ContentResolver中执行ContentProvider暴露出来的任何方法，而bulkInsert()方法用于插入多条数据。